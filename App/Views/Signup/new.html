{% extends "base.html" %} {% block title %}Register{% endblock %} {% block
footer %}

<script>
  function validatePassword(password) {
    const minLength = 8;
    const hasLetter = /[a-zA-Z]/.test(password);
    const hasNumber = /\d/.test(password);
    const hasSymbol = /[!@#$%^&*(),.?":{}|<>]/.test(password);

    let errors = [];

    if (password.length <script minLength) {
      errors.push("at least 8 characters");
    }
    if (!hasLetter) {
      errors.push("one letter");
    }
    if (!hasNumber) {
      errors.push("one number");
    }
    if (!hasSymbol) {
      errors.push("one symbol");
    }

    return errors;
  }

  const form = document.getElementById("signup-form");
  const passwordInput = document.getElementById("password");
  const passwordError = document.getElementById("password-error");

  passwordInput.addEventListener("input", function () {
    const password = passwordInput.value;
    const errors = validatePassword(password);

    if (errors.length > 0) {
      passwordError.textContent =
        "Password must contain " + errors.join(", ") + ".";
      passwordError.className = "error";
    } else {
      passwordError.textContent = "âœ… Password looks good!";
      passwordError.className = "success";
    }
  });

  form.addEventListener("submit", function (e) {
    const errors = validatePassword(passwordInput.value);

    if (errors.length > 0) {
      e.preventDefault();
      passwordError.textContent = "Fix your password before submitting.";
      passwordError.className = "error";
    }
  });
</script>

{% endblock %} {% block body %}

<h1>Registration page</h1>

{% if user.errors is not empty %}
<p>Errors:</p>
<ul>
  {% for error in user.errors %}
  <li>{{ error }}</li>
  {% endfor %}
</ul>

{% endif %}

<form method="POST" action="/signup/create">
  <div>
    <label for="inputName">Name</label>
    <input
      type="text"
      id="inputName"
      placeholder="Name"
      name="name"
      value="{{ user.name }}"
      autofocus
    />
  </div>
  <div>
    <label for="inputEmail">Email address</label>
    <input
      type="email"
      id="inputEmail"
      placeholder="Email address"
      name="email"
      value="{{ user.email }}"
      autofocus
    />
  </div>
  <div>
    <label for="inputPassword">Password</label>
    <input
      type="password"
      id="inputPassword"
      placeholder="password"
      name="password"
      autofocus
    />
  </div>
  <div>
    <label for="inputPasswordRepeat">Repeat Password</label>
    <input
      type="password"
      id="inputPasswordRepeat"
      placeholder="repeat password"
      name="repeat_password"
      autofocus
    />
  </div>

  <button type="submit">Sign Up</button>
</form>

{% endblock %}
